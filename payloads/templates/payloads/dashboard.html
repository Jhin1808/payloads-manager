<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background: #eef1f5;
      margin: 0;
      padding: 20px;
    "
  >
    <div style="max-width: 900px; margin: 0 auto">
      <!-- NAV / LINKS -->
      <div style="margin-bottom: 20px">
        <a
          href="{% url 'parts_list' %}"
          style="margin-right: 15px; text-decoration: none"
        >
          ← View Parts
        </a>
      </div>

      <h1 style="text-align: center; margin-bottom: 30px; color: #333">
        Payloads Dashboard
      </h1>

      <!-- STATS CARDS -->
      <div
        style="
          display: grid;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          gap: 16px;
          margin-bottom: 30px;
        "
      >
        <div
          style="
            background: white;
            padding: 16px 20px;
            border-radius: 10px;
            border: 1px solid #d7dce1;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
          "
        >
          <h2 style="margin: 0; font-size: 18px; color: #555">Total Parts</h2>
          <p style="font-size: 28px; margin: 8px 0; color: #2c3e50">
            {{ total_parts }}
          </p>
        </div>

        <div
          style="
            background: white;
            padding: 16px 20px;
            border-radius: 10px;
            border: 1px solid #d7dce1;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
          "
        >
          <h2 style="margin: 0; font-size: 18px; color: #555">
            Total Work Items
          </h2>
          <p style="font-size: 28px; margin: 8px 0; color: #2c3e50">
            {{ total_work_items }}
          </p>
        </div>

        <div
          style="
            background: white;
            padding: 16px 20px;
            border-radius: 10px;
            border: 1px solid #f5c6cb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
          "
        >
          <h2 style="margin: 0; font-size: 18px; color: #721c24">
            High Priority Items
          </h2>
          <p style="font-size: 28px; margin: 8px 0; color: #721c24">
            {{ high_priority_count }}
          </p>
        </div>

        <!-- UPCOMING WORK ITEMS -->
        <div
          style="
            background: white;
            padding: 20px 25px;
            border-radius: 12px;
            border: 1px solid #d7dce1;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.06);
            margin-top: 30px;
          "
        >
          <h2 style="margin-top: 0; font-size: 22px; color: #333">
            Upcoming Work Items (Next 7 Days)
          </h2>

          {% if due_soon_items %}
          <ul style="padding-left: 20px; margin-top: 10px">
            {% for item in due_soon_items %}
            <li style="margin-bottom: 12px">
              <strong>{{ item.title }}</strong>
              — {{ item.priority|title }} {% if item.priority == "HIGH" %}
              <span
                style="
                  background: #f8d7da;
                  color: #721c24;
                  padding: 3px 8px;
                  border-radius: 6px;
                  margin-left: 5px;
                  font-size: 12px;
                "
                >High</span
              >
              {% elif item.priority == "MEDIUM" %}
              <span
                style="
                  background: #fff3cd;
                  color: #856404;
                  padding: 3px 8px;
                  border-radius: 6px;
                  margin-left: 5px;
                  font-size: 12px;
                "
                >Medium</span
              >
              {% else %}
              <span
                style="
                  background: #d4edda;
                  color: #155724;
                  padding: 3px 8px;
                  border-radius: 6px;
                  margin-left: 5px;
                  font-size: 12px;
                "
                >Low</span
              >
              {% endif %}

              <!-- due date -->
              <span style="font-weight: bold; color: #0056b3; margin-left: 6px">
                (due: {{ item.due_date }})
              </span>

              <!-- link to part -->
              <a
                href="{% url 'part_detail' item.part.pk %}"
                style="
                  margin-left: 10px;
                  font-size: 13px;
                  text-decoration: none;
                  color: #2c65c8;
                "
              >
                View Part →
              </a>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p style="color: #777; font-style: italic">
            No upcoming work items due in the next 7 days.
          </p>
          {% endif %}
        </div>
      </div>
    </div>
  </body>
</html>
