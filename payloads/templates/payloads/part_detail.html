<!DOCTYPE html>
<html>
  <head>
    <title>Part Detail</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background: #eef1f5;
      margin: 0;
      padding: 20px;
    "
  >
    <div style="max-width: 900px; margin: 0 auto">
      <!-- BACK LINK -->
      <p>
        <a href="{% url 'parts_list' %}" style="text-decoration: none">
          ‚Üê Back to parts list
        </a>
      </p>

      <!-- CARD START -->
      <div
        style="
          background: white;
          padding: 20px 28px;
          margin-bottom: 25px;
          border-radius: 12px;
          border: 1px solid #d7dce1;
          box-shadow: 0 3px 6px rgba(0, 0, 0, 0.06);
        "
      >
        <!-- PART HEADER -->
        <h1 style="font-size: 28px; margin-bottom: 10px; color: #444">
          {{ part.part_number }} - {{ part.name }}
        </h1>

        <!-- STATUS BADGE -->
        <p>
          <strong>Status:</strong>
          {% if part.status == "APPROVED" %}
            <span
              style="
                background: #d4edda;
                color: #155724;
                padding: 4px 10px;
                border-radius: 6px;
                font-size: 14px;
              "
              >Approved</span
            >
          {% elif part.status == "PROPOSED" %}
            <span
              style="
                background: #fff3cd;
                color: #856404;
                padding: 4px 10px;
                border-radius: 6px;
                font-size: 14px;
              "
              >Proposed</span
            >
          {% else %}
            <span
              style="
                background: #f8d7da;
                color: #721c24;
                padding: 4px 10px;
                border-radius: 6px;
                font-size: 14px;
              "
              >Deprecated</span
            >
          {% endif %}
        </p>

        {% if part.description %}
        <p style="margin-top: 10px">
          <strong>Description:</strong><br />
          <span style="color: #555">
            {{ part.description }}
          </span>
        </p>
        {% endif %}

        <p style="margin-top: 10px; color: #777; font-size: 14px">
          Created: {{ part.created_at }}<br />
          Last updated: {{ part.updated_at }}
        </p>

        <hr style="margin: 20px 0" />

        <!-- WORK ITEMS LIST -->
        <h2 style="font-size: 22px; margin-bottom: 10px">Work Items</h2>

        {% if work_items %}
        <ul style="padding-left: 20px; color: #444">
          {% for item in work_items %}
          <li style="margin-bottom: 10px">
            <strong>{{ item.title }}</strong>

            <!-- PRIORITY BADGE -->
            {% if item.priority == "HIGH" %}
              <span
                style="
                  background: #f8d7da;
                  color: #721c24;
                  padding: 3px 8px;
                  border-radius: 6px;
                  font-size: 12px;
                  margin-left: 8px;
                "
                >High</span
              >
            {% elif item.priority == "MEDIUM" %}
              <span
                style="
                  background: #fff3cd;
                  color: #856404;
                  padding: 3px 8px;
                  border-radius: 6px;
                  font-size: 12px;
                  margin-left: 8px;
                "
                >Medium</span
              >
            {% else %}
              <span
                style="
                  background: #d4edda;
                  color: #155724;
                  padding: 3px 8px;
                  border-radius: 6px;
                  font-size: 12px;
                  margin-left: 8px;
                "
                >Low</span
              >
            {% endif %}

            <!-- DUE DATE -->
            {% if item.due_date %}
            <span
              style="
                font-weight: bold;
                color: #0056b3;
                margin-left: 6px;
              "
            >
              (due: {{ item.due_date }})
            </span>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p style="color: #777; font-style: italic">
          No work items for this part yet.
        </p>
        {% endif %}

        <!-- ADD WORK ITEM FORM -->
        <hr style="margin: 20px 0" />

        <h2 style="font-size: 20px; margin-bottom: 10px">Add Work Item</h2>

        <form
          method="post"
          style="
            margin-top: 10px;
            background: #f9fafc;
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid #d7dce1;
          "
        >
          {% csrf_token %}

          <!-- TITLE -->
          <label style="font-weight: bold; color: #2c3e50">Title</label><br />
          <input
            type="text"
            name="title"
            style="
              width: 100%;
              padding: 8px;
              margin-top: 4px;
              margin-bottom: 15px;
              border: 1px solid #ccc;
              border-radius: 6px;
            "
            required
          />

          <!-- DESCRIPTION -->
          <label style="font-weight: bold; color: #2c3e50"
            >Description</label
          ><br />
          <textarea
            name="description"
            rows="4"
            style="
              width: 100%;
              padding: 8px;
              margin-top: 4px;
              margin-bottom: 15px;
              border: 1px solid #ccc;
              border-radius: 6px;
            "
          ></textarea>

          <!-- PRIORITY -->
          <label style="font-weight: bold; color: #2c3e50">Priority</label><br />
          <select
            name="priority"
            style="
              padding: 6px 10px;
              margin-top: 4px;
              margin-bottom: 15px;
              border-radius: 6px;
              border: 1px solid #ccc;
            "
          >
            <option value="HIGH">High</option>
            <option value="MEDIUM" selected>Medium</option>
            <option value="LOW">Low</option>
          </select>

          <!-- DUE DATE (date only, model is DateField) -->
          <label style="font-weight: bold; color: #2c3e50"
            >Due date</label
          ><br />
          <input
            type="date"
            name="due_date"
            style="
              padding: 6px 10px;
              margin-top: 4px;
              margin-bottom: 20px;
              border-radius: 6px;
              border: 1px solid #ccc;
            "
          />

          <button
            type="submit"
            style="
              background: #2c65c8;
              color: white;
              border: none;
              padding: 10px 18px;
              border-radius: 6px;
              cursor: pointer;
              font-size: 14px;
              margin-top: 10px;
            "
          >
            Save Work Item
          </button>
        </form>
      </div>
      <!-- CARD END -->
    </div>
  </body>
</html>
